---

# ---------------------------------------------------------------------
# bashrc

- name: Ensure that custom .bashrc is in the home folder
  copy:
      src: .bashrc
      dest: "{{ lookup('env', 'HOME') }}/.bashrc"

- name: Ensure that DOTFILES is exported in .bashrc
  lineinfile:
      path: "{{ lookup('env', 'HOME') }}/.bashrc"
      regexp: "^export DOTFILES"
      line: export DOTFILES="$HOME/.config/dotfiles"

# ---------------------------------------------------------------------
# gitconfig

- name: Ensure that custom .gitconfig is in the home folder
  copy:
      src: .gitconfig
      dest: "{{ lookup('env', 'HOME') }}/.gitconfig"

# ---------------------------------------------------------------------
# inputrc

- name: Ensure that custom .inputrc is in our dotfiles folder
  copy:
      src: .inputrc
      dest: "{{ lookup('env', 'HOME') }}/.config/dotfiles/.inputrc"

- name: Ensure that INPUTRC is exported in .bashrc
  lineinfile:
      path: "{{ lookup('env', 'HOME') }}/.bashrc"
      regexp: "^export INPUTRC"
      line: export INPUTRC="$DOTFILES/.inputrc"

# ---------------------------------------------------------------------
# note-taking stuff

- name: Ensure notes.sh is in .config/dotfiles
  copy:
      src: notes.sh
      dest: "{{ lookup('env', 'HOME') }}/.config/dotfiles/scripts/notes.sh"

- name: Ensure notes.sh can be executed by current user
  file:
      path: "{{ lookup('env', 'HOME') }}/.config/dotfiles/scripts/notes.sh"
      mode: u=rwx,g=r,o=r

- name: Ensure that note-taking alias is present in .bashrc
  lineinfile:
      path: "{{ lookup('env', 'HOME') }}/.bashrc"
      regexp: "^alias nv"
      line: alias nv='$DOTFILES/scripts/notes.sh'

# ---------------------------------------------------------------------
# note-taking stuff

- name: Ensure cite.py is in .config/dotfiles
  copy:
      src: cite.py
      dest: "{{ lookup('env', 'HOME') }}/.config/dotfiles/scripts/cite.py"

- name: Ensure cite.py can be executed by current user
  file:
      path: "{{ lookup('env', 'HOME') }}/.config/dotfiles/scripts/cite.py"
      mode: u=rwx,g=r,o=r

- name: Ensure that citation alias is present in .bashrc
  lineinfile:
      path: "{{ lookup('env', 'HOME') }}/.bashrc"
      regexp: "^alias cite"
      line: alias cite='python3 $DOTFILES/scripts/cite.py'

# ---------------------------------------------------------------------
# games script

- name: Ensure games.sh is in .config/dotfiles
  copy:
      src: games.sh
      dest: "{{ lookup('env', 'HOME') }}/.config/dotfiles/scripts/games.sh"

- name: Ensure games.sh can be executed by current user
  file:
      path: "{{ lookup('env', 'HOME') }}/.config/dotfiles/scripts/games.sh"
      mode: u=rwx,g=r,o=r

- name: Ensure that alias for launching games is present in .bashrc
  lineinfile:
      path: "{{ lookup('env', 'HOME') }}/.bashrc"
      regexp: "^alias games"
      line: alias games='$DOTFILES/scripts/games.sh'

# ---------------------------------------------------------------------
# putting cheatsheets in common folder

- name: Ensure cheatsheets are in .config/dotfiles
  copy:
      src: cheatsheets/
      dest: "{{ lookup('env', 'HOME') }}/.config/dotfiles/cheatsheets/"